version: 2

models:
  - name: job_market_daily
    description: "Daily job posting metrics and trends by platform"
    columns:
      - name: job_posted_date
        description: "Date of job postings"
        tests:
          - not_null
      - name: source_platform
        description: "Job platform source (topcv, itviec)"
        tests:
          - not_null
      - name: daily_job_postings
        description: "Number of job postings on this date"
      - name: unique_companies_posting
        description: "Count of unique companies posting on this date"
      - name: avg_salary_offered
        description: "Average salary range offered"

  - name: job_location_summary
    description: "Comprehensive job market analysis by city/location"
    columns:
      - name: location_rank
        description: "Ranking of location by job count"
      - name: job_location
        description: "City or location name"
        tests:
          - not_null
          - unique
      - name: total_jobs
        description: "Total job postings in location"
      - name: avg_salary
        description: "Average salary offered in location"
      - name: pct_of_total_jobs
        description: "Percentage of all jobs in this location"

  - name: company_hiring_summary
    description: "Company-level hiring patterns and metrics"
    columns:
      - name: company_rank
        description: "Ranking by total job postings"
      - name: company_name
        description: "Company name"
        tests:
          - not_null
      - name: source_platform
        description: "Platform source"
      - name: total_job_postings
        description: "Total jobs posted by company"
      - name: avg_salary_offered
        description: "Average salary offered"

  - name: salary_benchmark
    description: "Salary analysis by job title and location"
    columns:
      - name: job_category
        description: "Job category/role"
        tests:
          - not_null
      - name: job_location
        description: "Location"
        tests:
          - not_null
      - name: num_positions
        description: "Number of positions matching criteria"
      - name: avg_salary
        description: "Average salary"
      - name: salary_median
        description: "Median salary (50th percentile)"
      - name: salary_q1
        description: "25th percentile salary"
      - name: salary_q3
        description: "75th percentile salary"

  - name: platform_comparison
    description: "TopCV vs ITViec comparative analysis"
    columns:
      - name: source_platform
        description: "Platform name"
        tests:
          - not_null
          - unique
      - name: total_job_postings
        description: "Total jobs on platform"
      - name: unique_companies
        description: "Unique companies posting"
      - name: avg_salary
        description: "Average salary range"
      - name: pct_discord_posted
        description: "Percentage of jobs posted to Discord"

  - name: job_category_analysis
    description: "Job title/role demand and compensation analysis"
    columns:
      - name: title_rank
        description: "Ranking by popularity"
      - name: job_category
        description: "Job category"
        tests:
          - not_null
      - name: num_positions
        description: "Number of positions"
      - name: avg_salary
        description: "Average salary"
      - name: pct_of_all_jobs
        description: "Percentage of all job postings"

  - name: education_distribution
    description: "Education level requirements analysis with benchmarking"
    columns:
      - name: education_level_grouped
        description: "Education level requirement (e.g., Bachelor+, Associate+)"
      - name: job_count
        description: "Number of jobs requiring this education"
      - name: avg_salary
        description: "Average salary for this education level"
      - name: demand_rank
        description: "Ranking by job count demand"
      - name: salary_vs_market_pct
        description: "Salary premium/discount vs market average"

  - name: location_salary_analysis
    description: "Salary benchmarking and work arrangement distribution by location"
    columns:
      - name: job_location
        description: "City or location"
      - name: total_jobs
        description: "Total job postings"
      - name: avg_salary_by_location
        description: "Average salary in location"
      - name: remote_jobs
        description: "Count of remote positions"
      - name: pct_remote
        description: "Percentage of remote positions"

  - name: work_model_analysis
    description: "Work arrangement type analysis with salary comparison"
    columns:
      - name: work_model_normalized
        description: "Work model (Full-time, Remote, Hybrid, etc.)"
      - name: job_count
        description: "Number of positions with this work model"
      - name: avg_salary
        description: "Average salary"
      - name: salary_positioning
        description: "Above/Below/At market average"
